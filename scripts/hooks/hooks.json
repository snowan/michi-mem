{
  "hooks": {
    "PreCompact": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "printf '{\"systemMessage\": \"[michi-mem] Context compaction detected. Before compaction proceeds, create a diary entry for this session by invoking the diary skill: use the Skill tool with skill=\\\"diary\\\". This preserves session knowledge before context is compacted.\"}'",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$(dirname \"$0\")/../scripts/hooks/auto-diary.sh\"",
            "timeout": 5
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$(dirname \"$0\")/../scripts/hooks/cleanup.sh\"",
            "timeout": 10
          }
        ]
      }
    ]
  }
}
